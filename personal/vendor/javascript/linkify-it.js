import{Any as t,Cc as _,Z as e,P as s}from"uc.micro";function reFactory(i){const r={};i=i||{};r.src_Any=t.source;r.src_Cc=_.source;r.src_Z=e.source;r.src_P=s.source;r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|");r.src_ZCc=[r.src_Z,r.src_Cc].join("|");const c="[><｜]";r.src_pseudo_letter="(?:(?!"+c+"|"+r.src_ZPCc+")"+r.src_Any+")";r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?";r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?";r.src_host_terminator="(?=$|"+c+"|"+r.src_ZPCc+")(?!"+(i["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))";r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|"+c+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+r.src_ZCc+"|[.]|$)|"+(i["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+r.src_ZCc+"|$)|;(?!"+r.src_ZCc+"|$)|\\!+(?!"+r.src_ZCc+"|[!]|$)|\\?(?!"+r.src_ZCc+"|[?]|$))+|\\/)?";r.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*';r.src_xn="xn--[a-z0-9\\-]{1,59}";r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})";r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))";r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))";r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))";r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))";r.src_host_strict=r.src_host+r.src_host_terminator;r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator;r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator;r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator;r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator;r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))";r.tpl_email_fuzzy="(^|"+c+'|"|\\(|'+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")";r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_fuzzy_strict+r.src_path+")";r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")";return r}function assign(t){const _=Array.prototype.slice.call(arguments,1);_.forEach((function(_){_&&Object.keys(_).forEach((function(e){t[e]=_[e]}))}));return t}function _class(t){return Object.prototype.toString.call(t)}function isString(t){return _class(t)==="[object String]"}function isObject(t){return _class(t)==="[object Object]"}function isRegExp(t){return _class(t)==="[object RegExp]"}function isFunction(t){return _class(t)==="[object Function]"}function escapeRE(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const i={fuzzyLink:true,fuzzyEmail:true,fuzzyIP:false};function isOptionsObj(t){return Object.keys(t||{}).reduce((function(t,_){return t||i.hasOwnProperty(_)}),false)}const r={"http:":{validate:function(t,_,e){const s=t.slice(_);e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i"));return e.re.http.test(s)?s.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,_,e){const s=t.slice(_);e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i"));return e.re.no_http.test(s)?_>=3&&t[_-3]===":"||_>=3&&t[_-3]==="/"?0:s.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(t,_,e){const s=t.slice(_);e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i"));return e.re.mailto.test(s)?s.match(e.re.mailto)[0].length:0}}};const c="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]";const n="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function resetScanCache(t){t.__index__=-1;t.__text_cache__=""}function createValidator(t){return function(_,e){const s=_.slice(e);return t.test(s)?s.match(t)[0].length:0}}function createNormalizer(){return function(t,_){_.normalize(t)}}function compile(t){const _=t.re=reFactory(t.__opts__);const e=t.__tlds__.slice();t.onCompile();t.__tlds_replaced__||e.push(c);e.push(_.src_xn);_.src_tlds=e.join("|");function untpl(t){return t.replace("%TLDS%",_.src_tlds)}_.email_fuzzy=RegExp(untpl(_.tpl_email_fuzzy),"i");_.link_fuzzy=RegExp(untpl(_.tpl_link_fuzzy),"i");_.link_no_ip_fuzzy=RegExp(untpl(_.tpl_link_no_ip_fuzzy),"i");_.host_fuzzy_test=RegExp(untpl(_.tpl_host_fuzzy_test),"i");const s=[];t.__compiled__={};function schemaError(t,_){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+_)}Object.keys(t.__schemas__).forEach((function(_){const e=t.__schemas__[_];if(e===null)return;const i={validate:null,link:null};t.__compiled__[_]=i;if(isObject(e)){isRegExp(e.validate)?i.validate=createValidator(e.validate):isFunction(e.validate)?i.validate=e.validate:schemaError(_,e);isFunction(e.normalize)?i.normalize=e.normalize:e.normalize?schemaError(_,e):i.normalize=createNormalizer()}else isString(e)?s.push(_):schemaError(_,e)}));s.forEach((function(_){if(t.__compiled__[t.__schemas__[_]]){t.__compiled__[_].validate=t.__compiled__[t.__schemas__[_]].validate;t.__compiled__[_].normalize=t.__compiled__[t.__schemas__[_]].normalize}}));t.__compiled__[""]={validate:null,normalize:createNormalizer()};const i=Object.keys(t.__compiled__).filter((function(_){return _.length>0&&t.__compiled__[_]})).map(escapeRE).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+_.src_ZPCc+"))("+i+")","i");t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+_.src_ZPCc+"))("+i+")","ig");t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i");t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i");resetScanCache(t)}function Match(t,_){const e=t.__index__;const s=t.__last_index__;const i=t.__text_cache__.slice(e,s);this.schema=t.__schema__.toLowerCase();this.index=e+_;this.lastIndex=s+_;this.raw=i;this.text=i;this.url=i}function createMatch(t,_){const e=new Match(t,_);t.__compiled__[e.schema].normalize(e,t);return e}function LinkifyIt(t,_){if(!(this instanceof LinkifyIt))return new LinkifyIt(t,_);if(!_&&isOptionsObj(t)){_=t;t={}}this.__opts__=assign({},i,_);this.__index__=-1;this.__last_index__=-1;this.__schema__="";this.__text_cache__="";this.__schemas__=assign({},r,t);this.__compiled__={};this.__tlds__=n;this.__tlds_replaced__=false;this.re={};compile(this)}LinkifyIt.prototype.add=function add(t,_){this.__schemas__[t]=_;compile(this);return this};LinkifyIt.prototype.set=function set(t){this.__opts__=assign(this.__opts__,t);return this};LinkifyIt.prototype.test=function test(t){this.__text_cache__=t;this.__index__=-1;if(!t.length)return false;let _,e,s,i,r,c,n,o,a;if(this.re.schema_test.test(t)){n=this.re.schema_search;n.lastIndex=0;while((_=n.exec(t))!==null){i=this.testSchemaAt(t,_[2],n.lastIndex);if(i){this.__schema__=_[2];this.__index__=_.index+_[1].length;this.__last_index__=_.index+_[0].length+i;break}}}if(this.__opts__.fuzzyLink&&this.__compiled__["http:"]){o=t.search(this.re.host_fuzzy_test);if(o>=0&&(this.__index__<0||o<this.__index__)&&(e=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null){r=e.index+e[1].length;if(this.__index__<0||r<this.__index__){this.__schema__="";this.__index__=r;this.__last_index__=e.index+e[0].length}}}if(this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]){a=t.indexOf("@");if(a>=0&&(s=t.match(this.re.email_fuzzy))!==null){r=s.index+s[1].length;c=s.index+s[0].length;if(this.__index__<0||r<this.__index__||r===this.__index__&&c>this.__last_index__){this.__schema__="mailto:";this.__index__=r;this.__last_index__=c}}}return this.__index__>=0};LinkifyIt.prototype.pretest=function pretest(t){return this.re.pretest.test(t)};LinkifyIt.prototype.testSchemaAt=function testSchemaAt(t,_,e){return this.__compiled__[_.toLowerCase()]?this.__compiled__[_.toLowerCase()].validate(t,e,this):0};LinkifyIt.prototype.match=function match(t){const _=[];let e=0;if(this.__index__>=0&&this.__text_cache__===t){_.push(createMatch(this,e));e=this.__last_index__}let s=e?t.slice(e):t;while(this.test(s)){_.push(createMatch(this,e));s=s.slice(this.__last_index__);e+=this.__last_index__}return _.length?_:null};LinkifyIt.prototype.matchAtStart=function matchAtStart(t){this.__text_cache__=t;this.__index__=-1;if(!t.length)return null;const _=this.re.schema_at_start.exec(t);if(!_)return null;const e=this.testSchemaAt(t,_[2],_[0].length);if(!e)return null;this.__schema__=_[2];this.__index__=_.index+_[1].length;this.__last_index__=_.index+_[0].length+e;return createMatch(this,0)};LinkifyIt.prototype.tlds=function tlds(t,_){t=Array.isArray(t)?t:[t];if(!_){this.__tlds__=t.slice();this.__tlds_replaced__=true;compile(this);return this}this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,_,e){return t!==e[_-1]})).reverse();compile(this);return this};LinkifyIt.prototype.normalize=function normalize(t){t.schema||(t.url="http://"+t.url);t.schema!=="mailto:"||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)};LinkifyIt.prototype.onCompile=function onCompile(){};export{LinkifyIt as default};

